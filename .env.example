# OpenDS Environment Configuration
# Copy this file to .env.local and customize for your environment

# ============================================================================
# Application
# ============================================================================
NODE_ENV="development"  # development, production, test
DEBUG="true"

# ============================================================================
# Server
# ============================================================================
PORT=3000
HOST="localhost"
BASE_URL="http://localhost:3000"

# ============================================================================
# Database
# ============================================================================
# OpenDS supports SQLite (easy setup) and PostgreSQL (advanced)

# RECOMMENDED: SQLite - Zero Configuration, Perfect for Most Teams
DATABASE_URL="sqlite:./data/opends.db"

# ADVANCED: PostgreSQL - For large teams or existing infrastructure
# Uncomment and configure if you prefer PostgreSQL:
# DATABASE_URL="postgresql://opends:opends@localhost:5432/opends_dev"
# DB_POOL_MIN=2
# DB_POOL_MAX=10

# ============================================================================
# CORS Configuration
# ============================================================================
# Allowed origins for cross-origin requests (comma-separated)
# Use * to allow all origins (not recommended for production)
CORS_ORIGIN="http://localhost:3000,http://localhost:3001"

# ============================================================================
# Authentication & Security
# ============================================================================
JWT_SECRET="your-super-secret-jwt-key-change-this-in-production"
JWT_ACCESS_EXPIRE="15m"   # 15 minutes
JWT_REFRESH_EXPIRE="7d"   # 7 days

# Password Requirements
PASSWORD_MIN_LENGTH=8
PASSWORD_REQUIRE_UPPERCASE=true
PASSWORD_REQUIRE_LOWERCASE=true
PASSWORD_REQUIRE_NUMBER=true
PASSWORD_REQUIRE_SPECIAL=false

# Session Security
SESSION_COOKIE_NAME="opends_session"
SESSION_COOKIE_SECURE=false  # Set to true in production with HTTPS
SESSION_COOKIE_HTTPONLY=true
SESSION_COOKIE_SAMESITE="lax"

# ============================================================================
# Rate Limiting
# ============================================================================
RATE_LIMIT_WINDOW_MS=900000  # 15 minutes
RATE_LIMIT_MAX_REQUESTS=100  # Max requests per window
RATE_LIMIT_LOGIN_MAX=5       # Max login attempts

# ============================================================================
# CORS
# ============================================================================
CORS_ORIGIN="http://localhost:3000"
CORS_CREDENTIALS=true

# ============================================================================
# Admin Settings
# ============================================================================
# First user becomes admin if this is set
INITIAL_ADMIN_EMAIL=""
INITIAL_ADMIN_PASSWORD=""

# Allow new registrations (false = invite-only)
ALLOW_REGISTRATION=false

# ============================================================================
# Email (Optional - for invitations and password reset)
# ============================================================================
SMTP_HOST=""
SMTP_PORT=587
SMTP_USER=""
SMTP_PASSWORD=""
SMTP_FROM="noreply@opends.dev"
SMTP_SECURE=false

# ============================================================================
# OAuth Providers (Optional)
# ============================================================================
# Google OAuth
GOOGLE_CLIENT_ID=""
GOOGLE_CLIENT_SECRET=""
GOOGLE_CALLBACK_URL="http://localhost:3000/api/auth/google/callback"

# GitHub OAuth
GITHUB_CLIENT_ID=""
GITHUB_CLIENT_SECRET=""
GITHUB_CALLBACK_URL="http://localhost:3000/api/auth/github/callback"

# ============================================================================
# Penpot Integration
# ============================================================================
PENPOT_API_URL="https://design.penpot.app"
PENPOT_CLIENT_ID=""
PENPOT_CLIENT_SECRET=""

# ============================================================================
# Storage
# ============================================================================
STORAGE_TYPE="local"  # local, s3
STORAGE_PATH="./storage/uploads"
STORAGE_MAX_FILE_SIZE=10485760  # 10MB in bytes

# S3 Configuration (if STORAGE_TYPE=s3)
S3_BUCKET=""
S3_REGION=""
S3_ACCESS_KEY=""
S3_SECRET_KEY=""

# ============================================================================
# Logging
# ============================================================================
LOG_LEVEL="info"  # error, warn, info, debug, trace
LOG_FORMAT="json"  # json, pretty
LOG_FILE_ENABLED=false
LOG_FILE_PATH="./logs/opends.log"

# ============================================================================
# Feature Flags
# ============================================================================
ENABLE_SWAGGER_DOCS=true
ENABLE_ANALYTICS=false
ENABLE_TELEMETRY=false

# ============================================================================
# Development Tools
# ============================================================================
# Seed database with example data
SEED_DATABASE=false

# Enable debug endpoints
ENABLE_DEBUG_ENDPOINTS=false